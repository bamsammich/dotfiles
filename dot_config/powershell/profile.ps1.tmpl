#!/usr/bin/env pwsh

$modules = @("posh-git")

Install-Module -Name $modules
$modules | Import-Module

# Environment Variables
$env:PATH="/usr/local/opt/coreutils/libexec/gnubin:/usr/local/bin:$HOME/.local/bin:$(brew --prefix)/bin:/usr/bin:$($env:PATH)"
$env:PWSH_THEMES_DIR = "$HOME/.pwsh/themes"
$env:OP_ACCOUNT = {{ .onepassword.account | quote }}

# Terminal theme
oh-my-posh init pwsh --config "$($env:PWSH_THEMES_DIR)/thudd.omp.json" | Invoke-Expression

Set-Alias -Name "ch" -Value "chezmoi"

if (Get-Item "$HOME/.pwsh/init" -ErrorAction SilentlyContinue) {
  Get-ChildItem "$HOME/.pwsh/init" | ForEach-Object {
    . $_
  }
}
