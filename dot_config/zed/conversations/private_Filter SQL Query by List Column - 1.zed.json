{"id":"799db12d-f60a-4041-813d-469253ccaa13","zed":"context","version":"0.4.0","text":"\n\n\nHow do I filter a SQL query in postgres where a list column is empty or contains a specific value?\nIn PostgreSQL, you can filter a query based on whether an array column is empty or contains a specific value using the `array_length` function and the `ANY` or `ALL` operators. Here are examples of how to achieve both:\n\n### 1. Filtering for an Empty Array\n\nTo filter rows where the array column is empty, you can use the `array_length` function. The `array_length` function returns the length of the array, and if the array is empty, it returns `NULL`.\n\n```sql\nSELECT *\nFROM your_table\nWHERE array_length(your_array_column, 1) IS NULL;\n```\n\n### 2. Filtering for a Specific Value in the Array\n\nTo filter rows where the array column contains a specific value, you can use the `ANY` operator.\n\n```sql\nSELECT *\nFROM your_table\nWHERE your_specific_value = ANY(your_array_column);\n```\n\n### 3. Combining Both Conditions\n\nIf you want to filter rows where the array column is either empty or contains a specific value, you can combine the two conditions using the `OR` operator.\n\n```sql\nSELECT *\nFROM your_table\nWHERE array_length(your_array_column, 1) IS NULL\n   OR your_specific_value = ANY(your_array_column);\n```\n\n### Example\n\nAssume you have a table named `products` with an array column `tags` and you want to filter rows where the `tags` array is empty or contains the value `'electronics'`.\n\n```sql\nSELECT *\nFROM products\nWHERE array_length(tags, 1) IS NULL\n   OR 'electronics' = ANY(tags);\n```\n\nThis query will return all rows where the `tags` array is either empty or contains the value `'electronics'`.\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":420}}},{"id":{"replica_id":0,"value":369},"start":102,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":421}}},{"id":{"replica_id":0,"value":370},"start":1607,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":422}}}],"summary":"Filter SQL Query by List Column","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}]}