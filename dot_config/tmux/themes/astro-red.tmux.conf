#!/usr/bin/env bash
# Astronaut Noir tmux theme
# A dark, red-hued noir theme matching Ghostty/Neovim/VSCode
# Designed to complement terminal transparency

# =====================================
# General Settings
# =====================================
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# =====================================
# Astronaut Noir Color Palette
# =====================================
# Background:   #0B0D10 (deep black)
# Alt BG:       #14171C (slightly lighter)
# UI BG:        #1E2229 (UI elements)
# Foreground:   #E6E8EB (light gray)
# Red:          #C8342F (primary red)
# Red Bright:   #E04B43 (accent red)
# Red Dark:     #8F2A27 (muted red)
# Amber:        #B89044 (green replacement)
# Amber Bright: #D4A520 (bright amber/yellow)
# Comment:      #6B7078 (muted gray)
# Muted:        #A3A7AD (medium gray)
# Border:       #3A424D (slate blue-gray)
# Slate:        #2A3038 (selection)

# =====================================
# Status Bar General
# =====================================
set -g status on
set -g status-interval 1
set -g status-justify left
set -g status-left-length 100
set -g status-right-length 100

# Status bar with transparent background
set -g status-style bg=default,fg='#E6E8EB'

# =====================================
# Message Area (Command Prompt)
# =====================================
set -g message-style bg='#E04B43',fg='#0B0D10',bold
set -g message-command-style bg='#E04B43',fg='#0B0D10',bold

# =====================================
# Pane Borders
# =====================================
set -g pane-border-style fg='#3A424D'
set -g pane-active-border-style fg='#E04B43',bold

# Pane number display
set -g display-panes-active-colour '#E04B43'
set -g display-panes-colour '#A3A7AD'

# =====================================
# Clock Mode
# =====================================
set -g clock-mode-colour '#E04B43'
set -g clock-mode-style 12

# =====================================
# Copy/Visual Mode
# =====================================
set -g mode-style bg='#E04B43',fg='#0B0D10'

# =====================================
# Window Status
# =====================================

# Window separator - spacing between pills
setw -g window-status-separator ''

# Inactive windows - rounded pill style
setw -g window-status-style fg='#6B7078',bg=default,none
setw -g window-status-format '#[fg=#6B7078,bg=#14171C]#[fg=#A3A7AD,bg=#14171C] #I #W#{?window_flags,#{window_flags}, } #[fg=#14171C,bg=default]'

# Active window - bright red pill
setw -g window-status-current-style fg='#0B0D10',bg='#E04B43',bold
setw -g window-status-current-format '#[fg=#E04B43,bg=#E04B43]#[fg=#0B0D10,bg=#E04B43,bold] #I #W#{?window_flags,#{window_flags}, } #[fg=#E04B43,bg=default]'

# Window with activity - amber indicator
setw -g window-status-activity-style fg='#D4A520',bg=default,none

# Window with bell - red blink
setw -g window-status-bell-style fg='#E04B43',bg=default,blink

# =====================================
# Status Bar Layout
# =====================================

# Left section: Session name with red pill + prefix indicator
# set -g status-left "#[fg=#0B0D10,bg=#E04B43,bold] #S #[fg=#E04B43,bg=default]#{?client_prefix,#[fg=#D4A520]  ,#[fg=#6B7078] }"
set -g status-left '#[fg=#0B0D10,bg=#E04B43,bold] > #[fg=#E04B43,bg=default]'
set -g window-status-format '#[fg=#E04B43,bg=#14171C] #I #W #[fg=#0B0D10,bg=#E04B43,bold]'
set -g window-status-current-format '#[fg=#0B0D10,bg=#E04B43,bold] #I #W #[fg=#E04B43,bg=#0B0D10]'

# Right section: Date and Time with subtle pills
# Date in dark pill, time in red accent pill
# set -g status-right "#[fg=#14171C,bg=default]#[fg=#A3A7AD,bg=#14171C] %m/%d #[fg=#E04B43,bg=#14171C]#[fg=#0B0D10,bg=#E04B43,bold] %I:%M %p "
set -g status-right '#[fg=#14171C,bg=default]#[fg=#A3A7AD,bg=#14171C] %m/%d %I:%M %p'

# =====================================
# Optional: Music Widget
# =====================================
# Uncomment and customize based on your system

# macOS with nowplaying-cli:
# set -g status-right "#[fg=#B89044] ♫ #(nowplaying-cli get title 2>/dev/null | head -c 25) #[fg=#14171C]#[fg=#A3A7AD,bg=#14171C] %m/%d #[fg=#E04B43,bg=#14171C]#[fg=#0B0D10,bg=#E04B43,bold] %I:%M %p "

# Linux with playerctl:
# set -g status-right "#[fg=#B89044] ♫ #(playerctl metadata --format '{{title}}' 2>/dev/null | head -c 25) #[fg=#14171C]#[fg=#A3A7AD,bg=#14171C] %m/%d #[fg=#E04B43,bg=#14171C]#[fg=#0B0D10,bg=#E04B43,bold] %I:%M %p "

# =====================================
# Additional Visual Polish
# =====================================

# Subtle pane background dimming (requires tmux >= 3.2)
# Uncomment if your tmux version supports it
# set -g window-active-style 'bg=default'
# set -g window-style 'bg=#0B0D10'
